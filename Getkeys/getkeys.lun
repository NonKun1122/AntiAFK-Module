--// Loader Script
local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")

-- KEY ‡∏ó‡∏µ‡πà‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Å‡∏£‡∏≠‡∏Å
local KEY = "‡πÉ‡∏™‡πà-Key-‡∏ó‡∏µ‡πà‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Å‡∏£‡∏≠‡∏Å"

-- API URL (Netlify)
local API_URL = "https://get-keys.netlify.app/.netlify/functions/verifykey"

-- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Key
local function checkKey(key)
    local response
    pcall(function()
        response = game:HttpGet(API_URL .. "?key=" .. key)
    end)
    if not response then
        return false, "‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ API ‡πÑ‡∏î‡πâ"
    end

    local success, data = pcall(function()
        return HttpService:JSONDecode(response)
    end)
    if not success then
        return false, "API ‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á"
    end

    if data.valid then
        return true, data
    else
        return false, data.reason or "Key ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á"
    end
end

-- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Key
local ok, result = checkKey(KEY)
if not ok then
    warn("‚ùå Key ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á: " .. tostring(result))
    Players.LocalPlayer:Kick("Key Invalid / Expired ‚ùå")
    return
end

print("‚úÖ Key ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ! ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó:", result.type, "‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏:", os.date("%c", result.expire/1000))

-- ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡πÅ‡∏°‡∏û
local placeId = game.PlaceId
print("üåê PlaceId:", placeId)

local scripts = {
    [1234567890] = "Games/GrowGarden.lua", -- Grow a Garden
    [2233445566] = "Games/GardenTow.lua",  -- Garden Tow
    [3344556677] = "Games/HuntZombie.lua", -- Hunt Zombie
}

local targetScript = scripts[placeId]
if targetScript then
    loadfile(targetScript)()
else
    warn("‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡∏°‡∏ô‡∏µ‡πâ")
end
