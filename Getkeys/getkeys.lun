-- Loader Script
local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local PlaceId = game.PlaceId

-- URLs
local MAIN_PAGE_URL   = "https://gat-keys.netlify.app"
local REDEEM_PAGE_URL = "https://gat-keys.netlify.app/redeem.html"

-- UI
local ScreenGui = Instance.new("ScreenGui", LocalPlayer:WaitForChild("PlayerGui"))
local Frame = Instance.new("Frame", ScreenGui)
Frame.Size = UDim2.new(0, 320, 0, 200)
Frame.Position = UDim2.new(0.5, -160, 0.5, -100)
Frame.BackgroundColor3 = Color3.fromRGB(40,40,40)
Frame.BorderSizePixel = 0

local Title = Instance.new("TextLabel", Frame)
Title.Size = UDim2.new(1,0,0,30)
Title.BackgroundTransparency = 1
Title.Text = "üîë ‡πÉ‡∏™‡πà Key ‡∏à‡∏≤‡∏Å‡πÄ‡∏ß‡πá‡∏ö"
Title.Font = Enum.Font.GothamBold
Title.TextSize = 16
Title.TextColor3 = Color3.fromRGB(255,255,255)

local KeyBox = Instance.new("TextBox", Frame)
KeyBox.Size = UDim2.new(1,-20,0,35)
KeyBox.Position = UDim2.new(0,10,0,45)
KeyBox.PlaceholderText = "Key ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å‡πÄ‡∏ß‡πá‡∏ö..."
KeyBox.ClearTextOnFocus = false
KeyBox.TextColor3 = Color3.fromRGB(0,0,0)
KeyBox.BackgroundColor3 = Color3.fromRGB(255,255,255)

local Status = Instance.new("TextLabel", Frame)
Status.Size = UDim2.new(1,0,0,20)
Status.Position = UDim2.new(0,0,1,-25)
Status.BackgroundTransparency = 1
Status.Font = Enum.Font.Gotham
Status.TextSize = 12
Status.TextColor3 = Color3.fromRGB(255,255,0)

-- ‡∏õ‡∏∏‡πà‡∏° Verify
local VerifyBtn = Instance.new("TextButton", Frame)
VerifyBtn.Size = UDim2.new(1,-20,0,35)
VerifyBtn.Position = UDim2.new(0,10,0,90)
VerifyBtn.Text = "‚úÖ Verify Key"
VerifyBtn.Font = Enum.Font.GothamBold
VerifyBtn.TextSize = 14
VerifyBtn.TextColor3 = Color3.fromRGB(255,255,255)
VerifyBtn.BackgroundColor3 = Color3.fromRGB(0,170,0)

-- ‡∏õ‡∏∏‡πà‡∏° Get Key (‡πÄ‡∏ß‡πá‡∏ö‡∏´‡∏•‡∏±‡∏Å)
local GetKeyBtn = Instance.new("TextButton", Frame)
GetKeyBtn.Size = UDim2.new(0.5,-15,0,35)
GetKeyBtn.Position = UDim2.new(0,10,0,135)
GetKeyBtn.Text = "üåê Get Key"
GetKeyBtn.Font = Enum.Font.GothamBold
GetKeyBtn.TextSize = 14
GetKeyBtn.TextColor3 = Color3.fromRGB(255,255,255)
GetKeyBtn.BackgroundColor3 = Color3.fromRGB(0,85,170)

-- ‡∏õ‡∏∏‡πà‡∏° Redeem Key (‡∏´‡∏ô‡πâ‡∏≤ Redeem)
local RedeemBtn = Instance.new("TextButton", Frame)
RedeemBtn.Size = UDim2.new(0.5,-15,0,35)
RedeemBtn.Position = UDim2.new(0.5,5,0,135)
RedeemBtn.Text = "üéüÔ∏è Redeem Key"
RedeemBtn.Font = Enum.Font.GothamBold
RedeemBtn.TextSize = 14
RedeemBtn.TextColor3 = Color3.fromRGB(255,255,255)
RedeemBtn.BackgroundColor3 = Color3.fromRGB(170,85,0)

-- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Key
local function checkKey(key)
    local ok, response = pcall(function()
        return game:HttpGet(REDEEM_PAGE_URL, true)
    end)
    if not ok then
        return false, "‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏î‡πâ"
    end
    local found = string.match(response, key)
    return found and true or false, found and nil or "Key ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏"
end

-- ‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡∏ï‡∏≤‡∏°‡πÅ‡∏°‡∏û
local function loadScriptForMap()
    local scriptMap = {
        [1234567890] = "https://raw.githubusercontent.com/NonKun1122/AntiAFK-Module/refs/heads/main/ChulexX.lua",
        [2345678901] = "https://gat-keys.netlify.app/scripts/gardentow.lua",
        [3456789012] = "https://gat-keys.netlify.app/scripts/huntzombie.lua"
    }
    local url = scriptMap[PlaceId]
    if not url then
        LocalPlayer:Kick("‚ùå ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏°‡∏û‡∏ô‡∏µ‡πâ")
        return
    end
    local success, err = pcall(function()
        loadstring(game:HttpGet(url))()
    end)
    if not success then
        warn("‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à:", err)
        LocalPlayer:Kick("‚ùå Error ‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå")
    end
end

-- ‡∏õ‡∏∏‡πà‡∏° Verify
VerifyBtn.MouseButton1Click:Connect(function()
    local key = KeyBox.Text
    if key == "" then
        Status.Text = "‚ö†Ô∏è ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà Key"
        return
    end
    Status.Text = "‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö..."
    local ok, result = checkKey(key)
    if not ok then
        Status.Text = "‚ùå "..tostring(result)
        task.wait(2)
        LocalPlayer:Kick("Key Invalid / Expired ‚ùå")
    else
        Status.Text = "‚úÖ Key ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á! ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå..."
        task.wait(1)
        ScreenGui:Destroy()
        loadScriptForMap()
    end
end)

-- ‡∏õ‡∏∏‡πà‡∏° Get Key
GetKeyBtn.MouseButton1Click:Connect(function()
    if syn and syn.request then
        syn.request({ Url = MAIN_PAGE_URL, Method = "GET" })
    elseif request then
        request({ Url = MAIN_PAGE_URL, Method = "GET" })
    elseif httprequest then
        httprequest({ Url = MAIN_PAGE_URL, Method = "GET" })
    end
    Status.Text = "üåê ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ß‡πá‡∏ö GetKey..."
end)

-- ‡∏õ‡∏∏‡πà‡∏° Redeem Key
RedeemBtn.MouseButton1Click:Connect(function()
    if syn and syn.request then
        syn.request({ Url = REDEEM_PAGE_URL, Method = "GET" })
    elseif request then
        request({ Url = REDEEM_PAGE_URL, Method = "GET" })
    elseif httprequest then
        httprequest({ Url = REDEEM_PAGE_URL, Method = "GET" })
    end
    Status.Text = "üéüÔ∏è ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ß‡πá‡∏ö Redeem..."
end)
