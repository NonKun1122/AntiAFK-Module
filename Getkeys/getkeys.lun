-- Services
local Players = game:GetService("Players")
local HttpService = game:GetService("HttpService")
local player = Players.LocalPlayer
local PlayerGui = player:WaitForChild("PlayerGui")

-- API URL
local API_URL = "https://yourproject.netlify.app/.netlify/functions/verifykey"

-- GUI
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "KeyLoaderUI"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = PlayerGui

local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 400, 0, 220)
MainFrame.Position = UDim2.new(0.5, -200, 0.5, -110)
MainFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
MainFrame.BorderSizePixel = 0
MainFrame.Parent = ScreenGui

local UICorner = Instance.new("UICorner")
UICorner.CornerRadius = UDim.new(0, 12)
UICorner.Parent = MainFrame

-- Title
local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1, -20, 0, 40)
Title.Position = UDim2.new(0, 10, 0, 10)
Title.BackgroundTransparency = 1
Title.Text = "üîë ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å Key"
Title.TextColor3 = Color3.new(1,1,1)
Title.Font = Enum.Font.GothamBold
Title.TextSize = 22
Title.Parent = MainFrame

-- TextBox ‡∏Å‡∏£‡∏≠‡∏Å Key
local KeyBox = Instance.new("TextBox")
KeyBox.Size = UDim2.new(1, -40, 0, 40)
KeyBox.Position = UDim2.new(0, 20, 0, 70)
KeyBox.PlaceholderText = "‡∏ß‡∏≤‡∏á Key ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà"
KeyBox.Text = ""
KeyBox.TextColor3 = Color3.new(1,1,1)
KeyBox.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
KeyBox.ClearTextOnFocus = false
KeyBox.Font = Enum.Font.Gotham
KeyBox.TextSize = 18
KeyBox.Parent = MainFrame

-- ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ Key
local KeyStatus = Instance.new("TextLabel")
KeyStatus.Size = UDim2.new(1, -40, 0, 30)
KeyStatus.Position = UDim2.new(0, 20, 0, 120)
KeyStatus.BackgroundTransparency = 1
KeyStatus.TextColor3 = Color3.fromRGB(255, 200, 0)
KeyStatus.Font = Enum.Font.GothamBold
KeyStatus.TextSize = 16
KeyStatus.Text = ""
KeyStatus.Parent = MainFrame

-- ‡∏õ‡∏∏‡πà‡∏° Verify
local VerifyBtn = Instance.new("TextButton")
VerifyBtn.Size = UDim2.new(1, -40, 0, 40)
VerifyBtn.Position = UDim2.new(0, 20, 1, -60)
VerifyBtn.Text = "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Key"
VerifyBtn.Font = Enum.Font.GothamBold
VerifyBtn.TextSize = 18
VerifyBtn.TextColor3 = Color3.new(1,1,1)
VerifyBtn.BackgroundColor3 = Color3.fromRGB(0, 150, 255)
VerifyBtn.Parent = MainFrame

local BtnCorner = Instance.new("UICorner")
BtnCorner.CornerRadius = UDim.new(0, 8)
BtnCorner.Parent = VerifyBtn

-- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Key
local function verifyKey(key)
    KeyStatus.Text = "‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö..."
    local success, response = pcall(function()
        return HttpService:GetAsync(API_URL .. "?key=" .. key)
    end)

    if not success then
        KeyStatus.Text = "‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ API"
        return false
    end

    local ok, data = pcall(function()
        return HttpService:JSONDecode(response)
    end)

    if not ok then
        KeyStatus.Text = "‚ùå API ‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á"
        return false
    end

    if data.valid then
        KeyStatus.Text = "‚úÖ Key ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ! ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó: "..data.type
        -- ‡πÄ‡∏Å‡πá‡∏ö Key ‡πÑ‡∏ß‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô Loader
        player:SetAttribute("UserKey", key)
        player:SetAttribute("KeyExpire", data.expire)
        -- ‡∏ã‡πà‡∏≠‡∏ô UI
        task.wait(1)
        MainFrame.Visible = false
        return true
    else
        KeyStatus.Text = "‚ùå Key ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏"
        return false
    end
end

-- Event ‡∏Å‡∏î Verify
VerifyBtn.MouseButton1Click:Connect(function()
    local key = KeyBox.Text
    if key == "" then
        KeyStatus.Text = "‚ùå ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å Key ‡∏Å‡πà‡∏≠‡∏ô"
        return
    end
    verifyKey(key)
end)
